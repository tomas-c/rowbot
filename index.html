<html>
  <head>
  	<script src="cordova.js"></script>
  	<script src="libs/evothings/evothings.js"></script>
    <script src="libs/flot/jquery.js"></script>
    <script src="libs/flot/jquery.flot.js"></script>
    <script src="libs/flot/jquery.flot.time.js"></script>    
    <script src="libs/flot/jquery.flot.axislabels.js"></script>
  </head>

  <body>
    <div id="acceleration" style="width:100%;height:30%;"></div>
    <div id="velocity" style="width:100%;height:30%;"></div>
    <div id="position" style="width:100%;height:30%;"></div>
    <script src="js/graphs.js"></script>
    <script src="js/rowbot.js"></script>
    <script>
      function initialise() {
        initialiseAccelerometer()
      }
      var velocity = VelocityPlotter();
      var position = PositionPlotter();

      // Temporary code, updating the data with phone accelerometer 
      // readings
      function initialiseAccelerometer() {
        function onSuccess(acceleration) {

          velocity.update(acceleration, 0.1);
          position.update(acceleration, 0.1);

          var timeNow = new Date().getTime();
          pushValue(timeNow, calculateMagnitude(acceleration), acceleration_data_1);
          pushValue(timeNow, calculateMagnitude(velocity.v), velocity_data_1);
          pushValue(timeNow, calculateMagnitude(position.p), position_data_1);
        }

        function onError(error) {
          hyper.log('Accelerometer error: ' + error)
        }

        navigator.accelerometer.watchAcceleration(
          onSuccess,
          onError,
          { frequency: 50 })
      }
      
      document.addEventListener(
        'deviceready',
        initialise,
        false)
        hyper.log("Starting")

      updateGraph();

    </script>
  
  </body>
</html>
